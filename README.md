# JobPortal - N·ªÅn t·∫£ng t√¨m vi·ªác l√†m tr·ª±c tuy·∫øn v·ªõi CI/CD DevOps

![Job Portal Banner](https://via.placeholder.com/1200x300/48A6A7/FFFFFF?text=JobPortal)

## üìö Gi·ªõi thi·ªáu

JobPortal l√† n·ªÅn t·∫£ng t√¨m vi·ªác l√†m to√†n di·ªán ƒë∆∞·ª£c ph√°t tri·ªÉn b·∫±ng MERN Stack (MongoDB, Express, React, Node.js), gi√∫p k·∫øt n·ªëi ·ª©ng vi√™n t√¨m vi·ªác v√† nh√† tuy·ªÉn d·ª•ng m·ªôt c√°ch hi·ªáu qu·∫£. N·ªÅn t·∫£ng n√†y ƒë∆∞·ª£c tri·ªÉn khai theo m√¥ h√¨nh DevOps hi·ªán ƒë·∫°i v·ªõi quy tr√¨nh CI/CD t·ª± ƒë·ªông h√≥a ho√†n to√†n tr√™n Google Cloud Platform.

## üåü T√≠nh nƒÉng ch√≠nh

### üîç D√†nh cho ng∆∞·ªùi t√¨m vi·ªác
- **T·∫°o h·ªì s∆° c√° nh√¢n**: ·ª®ng vi√™n c√≥ th·ªÉ t·∫°o h·ªì s∆° v·ªõi th√¥ng tin chi ti·∫øt v·ªÅ b·∫£n th√¢n, k·ªπ nƒÉng v√† kinh nghi·ªám
- **T√¨m ki·∫øm c√¥ng vi·ªác**: T√¨m ki·∫øm c√¥ng vi·ªác ph√π h·ª£p v·ªõi nhi·ªÅu b·ªô l·ªçc (v·ªã tr√≠, lo·∫°i c√¥ng vi·ªác, m·ª©c l∆∞∆°ng...)
- **L∆∞u c√¥ng vi·ªác y√™u th√≠ch**: ƒê√°nh d·∫•u v√† theo d√µi c√°c c∆° h·ªôi vi·ªác l√†m ∆∞ng √Ω
- **·ª®ng tuy·ªÉn tr·ª±c tuy·∫øn**: N·ªôp ƒë∆°n ·ª©ng tuy·ªÉn tr·ª±c ti·∫øp qua n·ªÅn t·∫£ng v·ªõi CV ƒë√£ t·∫£i l√™n
- **Theo d√µi ƒë∆°n ·ª©ng tuy·ªÉn**: Xem ƒë∆∞·ª£c tr·∫°ng th√°i c√°c ƒë∆°n ƒë√£ n·ªôp
- **ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n Google**: ƒê∆°n gi·∫£n h√≥a qu√° tr√¨nh ƒëƒÉng nh·∫≠p/ƒëƒÉng k√Ω

### üíº D√†nh cho nh√† tuy·ªÉn d·ª•ng
- **Qu·∫£n l√Ω c√¥ng ty**: T·∫°o v√† qu·∫£n l√Ω th√¥ng tin c√¥ng ty
- **ƒêƒÉng tin tuy·ªÉn d·ª•ng**: ƒêƒÉng t·∫£i c√°c v·ªã tr√≠ c·∫ßn tuy·ªÉn d·ª•ng v·ªõi th√¥ng tin chi ti·∫øt
- **Qu·∫£n l√Ω ·ª©ng vi√™n**: Xem x√©t, ch·∫•p nh·∫≠n ho·∫∑c t·ª´ ch·ªëi ƒë∆°n ·ª©ng tuy·ªÉn
- **B·∫£ng ƒëi·ªÅu khi·ªÉn**: Giao di·ªán qu·∫£n tr·ªã tr·ª±c quan cho vi·ªác theo d√µi tin tuy·ªÉn d·ª•ng

## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Frontend
- **React**: Th∆∞ vi·ªán JavaScript ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng
- **Redux Toolkit**: Qu·∫£n l√Ω state t·∫≠p trung cho ·ª©ng d·ª•ng
- **TailwindCSS**: Framework CSS v·ªõi c√°c utility class v√† responsive design
- **Framer Motion**: Th∆∞ vi·ªán animation cho React
- **Axios**: Th·ª±c hi·ªán c√°c HTTP request
- **React Router**: ƒê·ªãnh tuy·∫øn trong ·ª©ng d·ª•ng
- **Redux Persist**: L∆∞u tr·ªØ state v√†o local storage
- **shadcn/ui**: H·ªá th·ªëng UI components c√≥ th·ªÉ t√πy ch·ªânh cao
- **Sonner**: Hi·ªÉn th·ªã th√¥ng b√°o toast ƒë·∫πp m·∫Øt

### Backend
- **Node.js**: M√¥i tr∆∞·ªùng runtime JavaScript ph√≠a server
- **Express**: Framework web cho Node.js
- **MongoDB**: C∆° s·ªü d·ªØ li·ªáu NoSQL
- **Mongoose**: ODM (Object Data Modeling) cho MongoDB
- **JWT**: X√°c th·ª±c v√† ·ªßy quy·ªÅn ng∆∞·ªùi d√πng
- **Bcrypt**: M√£ h√≥a m·∫≠t kh·∫©u
- **Multer**: X·ª≠ l√Ω upload file
- **Cloudinary**: L∆∞u tr·ªØ h√¨nh ·∫£nh v√† file
- **Redis**: Cache v√† qu·∫£n l√Ω phi√™n l√†m vi·ªác
- **Passport.js**: X√°c th·ª±c v·ªõi c√°c d·ªãch v·ª• c·ªßa b√™n th·ª© ba
- **Express Rate Limit**: Gi·ªõi h·∫°n request ƒë·ªÉ ngƒÉn ch·∫∑n t·∫•n c√¥ng

### DevOps & Cloud Infrastructure
- **Docker**: Container h√≥a ·ª©ng d·ª•ng ƒë·ªÉ ƒë·∫£m b·∫£o nh·∫•t qu√°n gi·ªØa c√°c m√¥i tr∆∞·ªùng
- **GitHub/GitLab**: Qu·∫£n l√Ω m√£ ngu·ªìn, version control v√† trigger CI/CD
- **Google Cloud Build**: D·ªãch v·ª• CI/CD t·ª± ƒë·ªông build Docker images
- **Artifact Registry**: Kho l∆∞u tr·ªØ Docker images b·∫£o m·∫≠t v√† qu·∫£n l√Ω version
- **Google Kubernetes Engine (GKE)**: Qu·∫£n l√Ω, tri·ªÉn khai v√† m·ªü r·ªông container
- **ArgoCD**: GitOps continuous delivery tool cho Kubernetes
- **Cloud Load Balancing**: Ph√¢n ph·ªëi l∆∞u l∆∞·ª£ng truy c·∫≠p ·ª©ng d·ª•ng
- **Domain Name (jobmarket.fun)**: Cung c·∫•p ƒë·ªãa ch·ªâ d·ªÖ nh·ªõ cho ng∆∞·ªùi d√πng
- **Horizontal Pod Autoscaler**: T·ª± ƒë·ªông scale pods d·ª±a v√†o t·∫£i h·ªá th·ªëng
- **Network Policies**: B·∫£o m·∫≠t m·∫°ng gi·ªØa c√°c services trong Kubernetes
- **Ingress Controller**: Qu·∫£n l√Ω truy c·∫≠p v√†o c√°c services t·ª´ b√™n ngo√†i cluster

## üö¢ DevOps Workflow & Tri·ªÉn khai

### T·ªïng quan quy tr√¨nh CI/CD
1. Developer push code l√™n GitHub/GitLab
2. Cloud Build t·ª± ƒë·ªông build & t·∫°o Docker image, push l√™n Artifact Registry
3. ArgoCD ph√°t hi·ªán c√≥ image m·ªõi, t·ª± ƒë·ªông deploy (c·∫≠p nh·∫≠t manifest) l√™n GKE
4. GKE ch·∫°y container, c√¢n b·∫±ng t·∫£i, t·ª± ƒë·ªông scale theo nhu c·∫ßu

### H∆∞·ªõng d·∫´n tri·ªÉn khai chi ti·∫øt

#### B∆∞·ªõc 0: Ki·ªÉm tra c√¥ng ngh·ªá hi·ªán t·∫°i

Tr∆∞·ªõc khi b·∫Øt ƒë·∫ßu, h√£y ki·ªÉm tra nh·ªØng c√¥ng ngh·ªá ƒë√£ ƒë∆∞·ª£c √°p d·ª•ng:

```bash
# Ki·ªÉm tra Google Cloud project ID
gcloud config list project

# Ki·ªÉm tra c·∫•u h√¨nh Cloud Build
ls -la cloudbuild.yaml

# Ki·ªÉm tra cluster GKE
gcloud container clusters list

# Ki·ªÉm tra ArgoCD
kubectl get pods -n argocd

# Ki·ªÉm tra Artifact Registry
gcloud artifacts repositories list
```

#### B∆∞·ªõc 1: Thi·∫øt l·∫≠p GitHub/GitLab Repository

1. **T·∫°o repository** (n·∫øu ch∆∞a c√≥):

```bash
git init
git add .
git commit -m "Initial commit"
git branch -M main
git remote add origin https://github.com/your-username/JobPortal.git
git push -u origin main
```

2. **Thi·∫øt l·∫≠p webhook** ƒë·ªÉ trigger Cloud Build khi c√≥ push:

```bash
# L·∫•y webhook URL t·ª´ Cloud Build
gcloud builds triggers list
```

#### B∆∞·ªõc 2: C·∫•u h√¨nh Cloud Build

1. **Ki·ªÉm tra v√† c·∫≠p nh·∫≠t file `cloudbuild.yaml`**:

```yaml
steps:
  # C√†i ƒë·∫∑t dependencies cho Backend
  - name: 'node:18'
    dir: 'backend'
    entrypoint: 'npm'
    args: ['install']
    id: 'backend-install'
    
  # Build Backend Docker image
  - name: 'gcr.io/cloud-builders/docker'
    dir: 'backend'
    args: ['build', '-t', 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/backend:${SHORT_SHA}', '.']
    id: 'backend-build'
    waitFor: ['backend-install']

  # Push Backend Docker image v√†o Artifact Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/backend:${SHORT_SHA}']
    id: 'backend-push'
    waitFor: ['backend-build']

  # C√†i ƒë·∫∑t dependencies cho Frontend
  - name: 'node:18'
    dir: 'frontend'
    entrypoint: 'npm'
    args: ['install']
    id: 'frontend-install'

  # Build Frontend
  - name: 'node:18'
    dir: 'frontend'
    entrypoint: 'npm'
    args: ['run', 'build']
    id: 'frontend-build'
    waitFor: ['frontend-install']
    
  # Build Frontend Docker image
  - name: 'gcr.io/cloud-builders/docker'
    dir: 'frontend'
    args: ['build', '-t', 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/frontend:${SHORT_SHA}', '.']
    id: 'frontend-build-docker'
    waitFor: ['frontend-build']

  # Push Frontend Docker image v√†o Artifact Registry
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/frontend:${SHORT_SHA}']
    id: 'frontend-push'
    waitFor: ['frontend-build-docker']

  # C·∫≠p nh·∫≠t Kubernetes manifests v·ªõi image m·ªõi
  - name: 'gcr.io/cloud-builders/gke-deploy'
    args:
    - 'prepare'
    - '--filename=./kubernetes'
    - '--image=asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/frontend:${SHORT_SHA}'
    - '--image=asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/backend:${SHORT_SHA}'
    - '--output=./kubernetes/updated'
    id: 'prepare-manifests'
    waitFor: ['frontend-push', 'backend-push']

  # Commit thay ƒë·ªïi manifests v√†o Git repo ƒë·ªÉ ArgoCD ph√°t hi·ªán
  - name: 'gcr.io/cloud-builders/git'
    entrypoint: 'bash'
    args:
    - '-c'
    - |
      git config --global user.email "cloudbuild@example.com"
      git config --global user.name "Cloud Build"
      git clone https://github.com/your-username/JobPortal-k8s.git
      cp -r ./kubernetes/updated/* ./JobPortal-k8s/
      cd JobPortal-k8s
      git add .
      git commit -m "Update image to ${SHORT_SHA}"
      git push https://oauth2:${_GITHUB_TOKEN}@github.com/your-username/JobPortal-k8s.git
    id: 'commit-manifests'
    waitFor: ['prepare-manifests']

# L∆∞u tr·ªØ c√°c container images
images:
  - 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/backend:${SHORT_SHA}'
  - 'asia-northeast1-docker.pkg.dev/${PROJECT_ID}/jobportal/frontend:${SHORT_SHA}'
```

2. **C√†i ƒë·∫∑t Cloud Build Trigger**:

```bash
gcloud builds triggers create github \
  --name="jobportal-main" \
  --repo="your-github-repo" \
  --branch-pattern="main" \
  --build-config="cloudbuild.yaml"
```

#### B∆∞·ªõc 3: Thi·∫øt l·∫≠p Artifact Registry

1. **T·∫°o repository**:

```bash
gcloud artifacts repositories create jobportal \
  --repository-format=docker \
  --location=asia-northeast1 \
  --description="JobPortal Docker images"
```

2. **C·∫•u h√¨nh Docker ƒë·ªÉ s·ª≠ d·ª•ng Artifact Registry**:

```bash
gcloud auth configure-docker asia-northeast1-docker.pkg.dev
```

#### B∆∞·ªõc 4: C·∫•u h√¨nh Google Kubernetes Engine (GKE)

1. **T·∫°o cluster** (n·∫øu ch∆∞a c√≥):

```bash
gcloud container clusters create jobportal-cluster \
  --zone asia-east1-a \
  --num-nodes=3 \
  --machine-type=e2-standard-2 \
  --enable-autoscaling \
  --min-nodes=2 \
  --max-nodes=5
```

2. **K·∫øt n·ªëi v·ªõi cluster**:

```bash
gcloud container clusters get-credentials jobportal-cluster --zone asia-east1-a
```

3. **T·∫°o c√°c Kubernetes manifests**:

ƒê·∫£m b·∫£o c√°c file manifest (Deployments, Services, ConfigMaps, Secrets) ƒë√£ c√≥ trong th∆∞ m·ª•c `kubernetes/`:

```bash
mkdir -p kubernetes
```

**backend-deployment.yaml**:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: backend
  annotations:
    argocd-image-updater.argoproj.io/image-list: backend=asia-northeast1-docker.pkg.dev/your-project-id/jobportal/backend
    argocd-image-updater.argoproj.io/backend.update-strategy: semver
    argocd-image-updater.argoproj.io/write-back-method: git
spec:
  replicas: 2
  selector:
    matchLabels:
      app: backend
  template:
    metadata:
      labels:
        app: backend
    spec:
      containers:
      - name: backend
        image: asia-northeast1-docker.pkg.dev/your-project-id/jobportal/backend:latest
        resources:
          requests:
            cpu: 100m
            memory: 200Mi
          limits:
            cpu: 500m
            memory: 500Mi
        envFrom:
        - secretRef:
            name: backend-secrets
        - configMapRef:
            name: backend-config
        ports:
        - containerPort: 8000
        readinessProbe:
          httpGet:
            path: /api/v1/health
            port: 8000
          initialDelaySeconds: 15
          periodSeconds: 5
```

**frontend-deployment.yaml**:
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
  annotations:
    argocd-image-updater.argoproj.io/image-list: frontend=asia-northeast1-docker.pkg.dev/your-project-id/jobportal/frontend
    argocd-image-updater.argoproj.io/frontend.update-strategy: semver
    argocd-image-updater.argoproj.io/write-back-method: git
spec:
  replicas: 2
  selector:
    matchLabels:
      app: frontend
  template:
    metadata:
      labels:
        app: frontend
    spec:
      containers:
      - name: frontend
        image: asia-northeast1-docker.pkg.dev/your-project-id/jobportal/frontend:latest
        resources:
          requests:
            cpu: 100m
            memory: 200Mi
          limits:
            cpu: 300m
            memory: 400Mi
        envFrom:
        - configMapRef:
            name: frontend-config
        ports:
        - containerPort: 80
```

**backend-service.yaml**:
```yaml
apiVersion: v1
kind: Service
metadata:
  name: backend
spec:
  selector:
    app: backend
  ports:
  - port: 80
    targetPort: 8000
```

**frontend-service.yaml**:
```yaml
apiVersion: v1
kind: Service
metadata:
  name: frontend
spec:
  selector:
    app: frontend
  ports:
  - port: 80
    targetPort: 80
```

**ingress.yaml**:
```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: jobportal-ingress
  annotations:
    kubernetes.io/ingress.class: "gce"
spec:
  rules:
  - host: jobmarket.fun
    http:
      paths:
      - path: /api
        pathType: Prefix
        backend:
          service:
            name: backend
            port:
              number: 80
      - path: /
        pathType: Prefix
        backend:
          service:
            name: frontend
            port:
              number: 80
```

**app-secrets.yaml**:
```yaml
apiVersion: v1
kind: Secret
metadata:
  name: backend-secrets
type: Opaque
data:
  MONGODB_URI: <base64-encoded-mongodb-uri>
  JWT_SECRET: <base64-encoded-jwt-secret>
  REDIS_URL: <base64-encoded-redis-url>
  CLOUD_NAME: <base64-encoded-cloud-name>
  CLOUD_API_KEY: <base64-encoded-api-key>
  CLOUD_API_SECRET: <base64-encoded-api-secret>
```

#### B∆∞·ªõc 5: C√†i ƒë·∫∑t v√† c·∫•u h√¨nh ArgoCD

1. **C√†i ƒë·∫∑t ArgoCD v√†o cluster**:

```bash
kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
```

2. **C√†i ƒë·∫∑t ArgoCD CLI**:

```bash
# Tr√™n Linux
curl -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64
sudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd
rm argocd-linux-amd64

# Tr√™n macOS
brew install argocd
```

3. **Truy c·∫≠p ArgoCD UI**:

```bash
# Chuy·ªÉn ti·∫øp c·ªïng ArgoCD server
kubectl port-forward svc/argocd-server -n argocd 8080:443
```

4. **L·∫•y m·∫≠t kh·∫©u admin**:

```bash
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d
```

5. **ƒêƒÉng nh·∫≠p b·∫±ng CLI**:

```bash
argocd login localhost:8080
```

6. **T·∫°o ·ª©ng d·ª•ng trong ArgoCD**:

```bash
argocd app create jobportal \
  --repo https://github.com/your-username/JobPortal-k8s.git \
  --path . \
  --dest-server https://kubernetes.default.svc \
  --dest-namespace default \
  --sync-policy automated
```

7. **C√†i ƒë·∫∑t ArgoCD Image Updater**:

```bash
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj-labs/argocd-image-updater/stable/manifests/install.yaml
```

#### B∆∞·ªõc 6: C·∫•u h√¨nh Load Balancer v√† DNS

1. **L·∫•y ƒë·ªãa ch·ªâ IP c·ªßa Load Balancer**:

```bash
kubectl get ingress jobportal-ingress
```

2. **C·∫•u h√¨nh DNS**:

V√†o nh√† cung c·∫•p DNS c·ªßa b·∫°n (v√≠ d·ª•: Google Domains, Cloudflare), v√† t·∫°o b·∫£n ghi A tr·ªè t·ª´ `jobmarket.fun` ƒë·∫øn ƒë·ªãa ch·ªâ IP c·ªßa Load Balancer.

#### B∆∞·ªõc 7: Theo d√µi v√† gi√°m s√°t h·ªá th·ªëng

1. **C√†i ƒë·∫∑t Prometheus v√† Grafana** cho vi·ªác gi√°m s√°t:

```bash
# Th√™m Helm repo
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update

# C√†i ƒë·∫∑t Prometheus stack
helm install prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --create-namespace
```

2. **Truy c·∫≠p Grafana dashboard**:

```bash
kubectl port-forward svc/prometheus-grafana -n monitoring 3000:80
```

ƒêƒÉng nh·∫≠p v·ªõi:
- Username: `admin`
- Password: `prom-operator`

#### B∆∞·ªõc 8: Test CI/CD Pipeline

1. **Thay ƒë·ªïi m√£ ngu·ªìn**:

```bash
# Th·ª±c hi·ªán m·ªôt thay ƒë·ªïi nh·ªè
echo '// Thay ƒë·ªïi m·ªõi' >> frontend/src/App.jsx

# Commit v√† push
git add frontend/src/App.jsx
git commit -m "Test CI/CD pipeline"
git push origin main
```

2. **Theo d√µi qu√° tr√¨nh build**:

```bash
# Xem Cloud Build logs
gcloud builds list

# Theo d√µi tr·∫°ng th√°i ArgoCD
argocd app get jobportal
```

3. **Ki·ªÉm tra tri·ªÉn khai**:

```bash
# Ki·ªÉm tra pods
kubectl get pods

# Ki·ªÉm tra ·ª©ng d·ª•ng s·∫µn s√†ng
kubectl get deployments
```

## üìã Y√™u c·∫ßu h·ªá th·ªëng

- Node.js phi√™n b·∫£n 18 tr·ªü l√™n
- MongoDB 5.0 tr·ªü l√™n
- Redis 6.0 tr·ªü l√™n (cho cache v√† qu·∫£n l√Ω phi√™n)
- T√†i kho·∫£n Google Cloud v·ªõi c√°c APIs ƒë∆∞·ª£c b·∫≠t:
  - Container Registry
  - Kubernetes Engine
  - Cloud Build
  - Artifact Registry
- T√†i kho·∫£n Cloudinary (cho vi·ªác l∆∞u tr·ªØ h√¨nh ·∫£nh v√† file)

## üîí B·∫£o m·∫≠t

D·ª± √°n √°p d·ª•ng nhi·ªÅu bi·ªán ph√°p b·∫£o m·∫≠t:
- JWT cho x√°c th·ª±c ng∆∞·ªùi d√πng
- Bcrypt cho m√£ h√≥a m·∫≠t kh·∫©u
- Sanitization cho d·ªØ li·ªáu ƒë·∫ßu v√†o
- Rate limiting ƒë·ªÉ ngƒÉn ch·∫∑n t·∫•n c√¥ng brute force
- CORS protection
- Helmet ƒë·ªÉ thi·∫øt l·∫≠p c√°c HTTP header an to√†n
- Network Policies trong Kubernetes
- Secrets qu·∫£n l√Ω b·∫±ng Kubernetes Secrets
- HTTPS v·ªõi TLS termination t·∫°i Load Balancer

## üìß Li√™n h·ªá

N·∫øu c√≥ b·∫•t k·ª≥ c√¢u h·ªèi ho·∫∑c ƒë·ªÅ xu·∫•t n√†o v·ªÅ quy tr√¨nh DevOps, vui l√≤ng li√™n h·ªá:

Email: your-email@example.com

---

&copy; 2025 JobPortal. Developed with ‚ù§Ô∏è by Your Team.
